<openerp>
    <data>
        <template name="Chess Page" id="chesspage" page="True">
            <t t-call="website.layout">
                    <div class="oe_structure">
                        <div class="container">
                            <h1>Chess Services</h1>
                            <div class='menu'>
                                <ul class="chess_services">
				                    <li><a href="#?w=400" rel="popup1" class="poplight">Create game</a></li>
				                    <li><a href="#?w=400" rel="popup2" class="poplight">Play with a friend</a></li>
				                    <li><a href="#?w=400" rel="popup3" class="poplight" onclick="rnd_game()">Play with a random player</a></li>
			                    </ul>
                            </div>
                            <div id="popup1" class="popup_block">
                                <h2>Create game</h2>
                                <form name="create_game" action="/chess/game/" method="post" data-model_name="chess.game">
                                    <!--<input type="hidden" name="csrf_token" t-att-value="request.csrf_token()"/>-->
                                    <div class="popup_content">
                                        <h3>Game type:</h3>
                                         <p>
                                            <input type="radio" name="game_type" value="standart" id="standart" checked="true"> Standart </input>
                                            <input type="radio" name="game_type" value="blitz" id="blitz"> Blitz </input>
                                            <input type="radio" name="game_type" value="limited time" id="limited time"> Limited time </input>
                                         </p>
                                        <h3>Figure color:</h3>
                                        <p>
                                            <input type="radio" name="first_color_figure" value="white" checked="true"> White </input>
                                            <input type="radio" name="first_color_figure" value="black"> Black </input>
                                        </p>
                                        <br/>
                                        <input type="hidden" name="second_user_id" value="0"/>
                                        <input type="submit" name="submit" id="create_game" value="Create game" />
                                    </div>
                                </form>
                            </div>
                            <div id="popup2" class="popup_block">
                                <h2>Play with a friend</h2>
                                <div class="popup_content">
                                    <h3>Users:</h3>
                                    <form id="play_with_a_friend" name="play_with_a_friend" action="/chess/game/" method="post" data-model_name="chess.game">
                                        <!--<input type="hidden" name="csrf_token" t-att-value="request.csrf_token()"/>-->
                                        <select name="second_user_id" size="1">
                                            <t t-foreach="users" t-as="user">
                                                <option t-attf-value="{{ user.id }}"><t t-esc="user.name"/></option>
                                            </t>
                                        </select>
                                        <h3>Game type:</h3>
                                         <p>
                                            <input type="radio" name="game_type" value="standart" id="standart" checked="true"> Standart </input>
                                            <input type="radio" name="game_type" value="blitz" id="blitz"> Blitz </input>
                                            <input type="radio" name="game_type" value="limited time" id="limited time"> Limited time </input>
                                        </p>

                                        <h3>Figure color:</h3>
                                        <p>
                                            <input type="radio" name="first_color_figure" value="white" checked="true"> White </input>
                                            <input type="radio" name="first_color_figure" value="black"> Black </input>
                                        </p>
                                        <br/>
                                        <input type="submit" name="submit" id="create_game_friend" value="Create game" />
                                    </form>
                                </div>
                            </div>
                            <div id="popup3" class="popup_block">
                                <div class="popup_content">
		                            <h2>Play random game</h2>
		                            <h3>Please wait, search games...</h3>
		                        </div>
                            </div>
                        </div>
                    </div>
            </t>
        </template>
        <template name="Game Page" id="gamepage" page="True">
            <t t-call="website.layout">
                <div class="conteiner">
                    <div class="content">
                        <div class='box'>
                            <div class="site_header">
                                <div class="side">
                                    <div class="side_box padded">
                                        <div class="game_infos">
                                            <div class="header">
                                                <span class="setup">
                                                    <p><t t-esc="games.game_type"/></p>
                                                </span>
                                                <p>activ partia</p>
                                            </div>
                                        </div>
                                        <div class="players">
                                            <div t-attf-class="player_color_icon_is_{{games.first_color_figure }}">
                                                <t t-esc="games.first_user_id.name"/>
                                            </div>
                                            <div t-attf-class="player_color_icon_is_{{games.second_color_figure }}">
                                                <t t-esc="games.second_user_id.name"/>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <!--chat-->
                                <div class="chat_menu">
                                    <div class="messages_container">
                                        <input title="show chat" id="toggle_chat" class="toggle_chat" type="checkbox"><label for="toggle_chat"> Window chat </label></input>
                                    </div>
                                </div>
                                    <div class="chat" id="chat">
                                        <div class="window_chat" id="window_chat"></div>
                                        <div class="chat_line"></div>
                                        <form name="chat_message" method="post" data-model_name="chess.game.chat" id="chat_form" class="chat_form">
                                            <div class="message_chat">
                                                <textarea type="text" name="message_text" class="message_text" id="message_text" cols="18" rows="3"></textarea>
                                            </div>
                                            <div class="button_chat">
                                                <input type="submit" name="submit" id="message_btn" class="message_btn" value="send" />
                                            </div>
                                        </form>
                                    </div>


                            </div>
                            <!--chess board-->
                            <div class="chess_board">
                                <div class="chess_game">
                                    <div class="eliminated_pieces">
                                        <div class="figure_white" id="figure_white"></div>
                                        <div class="figure_black" id="figure_black"></div>
                                    </div>
                                    <div id="board"></div>
                                </div>
                            </div>
                            <!--chess status, FEN, PGN etc-->
                            <div class="chess_information">
                                <div class="chess_time_usr2">
                                    Time: <span id="chess_time"></span>
                                </div>
                                <div class="chess_ground">
                                    <p class="status">Status: <span id="status"></span></p>
                                    <div class="pgn">
                                        <p>PGN: <span id="pgn"></span></p>
                                    </div>
                                    <div class="end_game">
                                        <a id="surrender" data-title="Surrender" href="#"></a>
                                        <a id="suggest_a_draw" data-title="Suggest a draw" href="#"></a>
                                        <!--<input type="button" id="moveBtn" value="e2-e4" />-->
                                    </div>
                                    <a id="toggler" href="#">Setting</a>
                                    <div id="box">
                                        <div class="user_button">
                                            <input type="button" id="flipOrientationBtn" value="Flip orientation" />
                                        </div>
                                        <div class="fen">
                                            <span id="fen"></span>
                                        </div>
                                    </div>
                                </div>
                                <div class="chess_time_usr1">
                                    Time: <span id="chess_time"></span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </t>
        </template>
        <template id="external_lib" name="External Librairies of the Livechat, required to make it work">
            <!-- OpenERP minimal lib -->
            <script type="text/javascript" src="/web/static/lib/underscore/underscore.js"></script>
            <script type="text/javascript" src="/web/static/lib/underscore.string/lib/underscore.string.js"></script>
            <script type="text/javascript" src="/web/static/lib/jquery/jquery.js"></script>
            <script type="text/javascript" src="/web/static/lib/qweb/qweb2.js"></script>
            <script type="text/javascript" src="/web/static/src/js/openerpframework.js"></script>
            <!-- add the internal lib -->
            <t t-call="im_livechat.internal_lib"/>
        </template>
        <template id="assets_frontend" name="chess assets frontend" inherit_id="website.assets_frontend">
             <xpath expr="." position="inside">
                 <link rel="stylesheet" type="text/less" href="/chess/static/less/winmodal.less"/>
                 <link rel="stylesheet" type="text/less" href="/chess/static/less/chessboard.less"/>
                 <link rel="stylesheet" type="text/less" href="/chess/static/less/sweet-alert.less"/>
                 <link rel="stylesheet" type="text/less" href="/chess/static/less/style.less"/>
                 <link rel="stylesheet" type="text/less" href="/chess/static/less/common.less"/>
                 <link rel="stylesheet" type="text/less" href="/chess/static/less/simple-chat.less"/>
                 <script type="text/javascript" src="/chess/static/js/sweet-alert.js"></script>
                 <script type="text/javascript" src="/chess/static/js/chessboard.js"></script>
                 <script type="text/javascript" src="/chess/static/js/chess.js"></script>
                 <script type="text/javascript" src="/bus/static/src/js/bus.js"></script>
                 <script type="text/javascript" src="/chess/static/js/dm-modal.js"></script>
                 <script type="text/javascript" src="/chess/static/js/common.js"></script>
                 <script type="text/javascript" src="/chess/static/js/chesschat.js"></script>
                 <script type="text/javascript" src="/chess/static/js/random_game.js"></script>
                 <script type="text/javascript" src="/chess/static/js/seedrandom-min.js"></script>
                 <script type="text/javascript" src="/chess/static/js/jquery.seed-colors.js"></script>
             </xpath>
        </template>
        <template name="User list" id="userpage" page="True">
            <t t-call="website.layout">
                <t t-set="title">Game list</t>
                <div class="oe_structure">
                    <div class="container">
                        <div class="game_list">
                        <div class="chess_list">
                            <h3>Games completed</h3>
                            <ul>
                            <t t-foreach="games_completed" t-as="game_completed">
                                <li> <a t-attf-href="/chess/game/{{ game_completed.id }}/">
                                    <t t-esc="game_completed.first_user_id.name"/>
                                    VS
                                    <t t-esc="game_completed.second_user_id.name"/>
                                    win is
                                    <t t-esc="game_completed.status"/>
                                </a> </li>
                            </t>
                            </ul>
                        </div>
                        </div>
                    </div>
                </div>
            </t>
        </template>
    </data>
</openerp>